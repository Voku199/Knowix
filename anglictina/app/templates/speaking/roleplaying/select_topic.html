{% extends "base.html" %}
{% block content %}
<style>
    .topic-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 32px;
        margin: 40px 0 60px 0;
    }

    .topic-card {
        background: #f8f9fa;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        overflow: hidden;
        transition: transform 0.15s;
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    .topic-card:hover {
        transform: translateY(-6px) scale(1.03);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.13);
    }

    .topic-img {
        width: 100%;
        height: 140px;
        object-fit: cover;
        background: #e3eafc;
    }

    .topic-content {
        padding: 18px 16px 16px 16px;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .topic-title {
        font-size: 1.2em;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .topic-desc {
        font-size: 1em;
        color: #555;
        margin-bottom: 12px;
    }

    .topic-link-btn {
        background: #3498db;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 10px 0;
        font-size: 1.1em;
        text-decoration: none;
        cursor: pointer;
        transition: background 0.2s;
        width: 100%;
    }

    .topic-link-btn:hover {
        background: #217dbb;
    }

    .topic-link-card {
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .topic-link-card:hover {
        text-decoration: none;
        color: inherit;
    }

    @media (max-width: 600px) {
        .topic-grid {
            gap: 18px;
        }

        .topic-card {
            min-width: 0;
        }
    }
</style>


<main>
    <h1 style="text-align:center; margin-top:40px;">Vyber si konverzační téma</h1>
    <div class="topic-grid">
        {% for topic in topics %}
        <a class="topic-link-card" href="{{ url_for('roleplaying.select_topic') }}?topic={{ topic.filename }}">
            <div class="topic-card" tabindex="0">
                <img class="topic-img" src="{{ url_for('static', filename=topic.img) }}" alt="{{ topic.name }}">
                <div class="topic-content">
                    <div>
                        <div class="topic-title">{{ topic.name }}</div>
                        <div class="topic-desc">{{ topic.desc }}</div>
                    </div>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</main>


<script>
    // theme-toggle.js
    const themeToggle = document.getElementById('theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', () => {
            fetch('/set_theme', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    theme: document.body.classList.contains('dark-mode') ? 'light' : 'dark'
                })
            }).then(() => {
                document.body.classList.toggle('dark-mode');
                sessionStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            });
        });
    }
    // Detekce kliknutí mimo menu
    document.addEventListener('click', (e) => {
        const profileMenu = document.getElementById('profileMenu');
        const trigger = document.getElementById('profileMenuTrigger');
        if (profileMenu && trigger && !trigger.contains(e.target) && !profileMenu.contains(e.target)) {
            profileMenu.style.opacity = '0';
            profileMenu.style.visibility = 'hidden';
            profileMenu.style.transform = 'translateY(10px)';
        }
    });
</script>
{% endblock %}